(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}function n(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function r(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,i(e,t,"get"))}function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,i(e,t,"set"),n),n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakMap,f=new WeakMap,p=new WeakMap,y=new WeakMap,h=new WeakMap,d=new WeakMap,v=new WeakMap,b=new WeakMap,m=new WeakMap,w=function(){function e(t){var i=t.cards,w=t.userId,g=t.renderer,_=t.handleLikeButton,k=t.handleDeleteCard,S=t.templateSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,a,{writable:!0,value:void 0}),n(this,u,{writable:!0,value:void 0}),n(this,c,{writable:!0,value:void 0}),n(this,l,{writable:!0,value:void 0}),n(this,s,{writable:!0,value:void 0}),n(this,f,{writable:!0,value:void 0}),n(this,p,{writable:!0,value:void 0}),n(this,y,{writable:!0,value:void 0}),n(this,h,{writable:!0,value:void 0}),n(this,d,{writable:!0,value:void 0}),n(this,v,{writable:!0,value:void 0}),n(this,b,{writable:!0,value:void 0}),n(this,m,{writable:!0,value:void 0}),o(this,a,S),o(this,u,i.name),o(this,m,i),o(this,b,i._id),o(this,v,i.owner._id),o(this,s,w),o(this,c,i.link),o(this,d,i.likes),this._renderer=g,this._handleLikeButton=_,this._handleDeleteCard=k,o(this,l,this._getTemplate()),o(this,h,r(this,l).querySelector("#countLikes"))}var i,w;return i=e,(w=[{key:"_getTemplate",value:function(){return document.querySelector(r(this,a)).content.cloneNode(!0)}},{key:"_deleteCard",value:function(e){e.target.closest(".card").remove()}},{key:"_setAttribute",value:function(){var e=this;o(this,p,r(this,l).querySelector(".card__button")),o(this,y,r(this,l).querySelector(".card__bascket")),r(this,f).addEventListener("click",(function(){e._renderer()})),r(this,p).addEventListener("click",(function(){e._handleLikeButton(r(e,m))})),r(this,y).addEventListener("click",(function(t){e._handleDeleteCard(t),document.querySelector(".popup_delete-card").classList.add("popup_opened")}))}},{key:"_checkLike",value:function(){var e=this;r(this,m).likes.some((function(t){return r(e,s)===t._id}))?this.activeLike():this.unActiveLike()}},{key:"activeLike",value:function(){this.isLaked=!0,r(this,p).classList.add("card__button_active")}},{key:"unActiveLike",value:function(){this.isLaked=!1,r(this,p).classList.remove("card__button_active")}},{key:"_checkBascket",value:function(){console.log(r(this,v)),console.log(r(this,s)+"   это яяя"),r(this,v)===r(this,s)&&(r(this,y).style.display="block")}},{key:"displayLike",value:function(e){this.number=e,0==this.number?r(this,h).textContent="":r(this,h).textContent=this.number.length}},{key:"generateCard",value:function(){return o(this,f,r(this,l).querySelector(".card__photography")),r(this,f).setAttribute("src",r(this,c)),r(this,f).setAttribute("alt",r(this,u)),this._setAttribute(),this._checkBascket(),this._checkLike(),this.displayLike(r(this,d)),r(this,l).querySelector(".card__title").textContent=r(this,u),r(this,l)}}])&&t(i.prototype,w),Object.defineProperty(i,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}function k(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function S(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,j(e,t,"get"))}function E(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,j(e,t,"set"),n),n}function j(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var L=new WeakMap,O=new WeakMap,P=new WeakMap,C=new WeakMap,T=new WeakMap,I=new WeakMap,R=new WeakMap,M=new WeakMap,W=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,L,{writable:!0,value:void 0}),k(this,O,{writable:!0,value:void 0}),k(this,P,{writable:!0,value:void 0}),k(this,C,{writable:!0,value:void 0}),k(this,T,{writable:!0,value:void 0}),k(this,I,{writable:!0,value:void 0}),k(this,R,{writable:!0,value:void 0}),k(this,M,{writable:!0,value:void 0}),E(this,L,document.querySelector(n)),E(this,O,Array.from(S(this,L).querySelectorAll(t.inputSelector))),E(this,I,t.errorStr),E(this,T,t.popupInputErrorClass),E(this,C,t.invalidSubmitButtonClass),E(this,P,t.popupInputInvalidClass),E(this,R,S(this,L).querySelector(t.submitButonSelector))}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_setEventListener",value:function(){var e=this;S(this,L).addEventListener("submit",(function(t){t.preventDefault(),S(e,R).classList.add(S(e,C)),S(e,R).disabled=!0})),S(this,O).forEach((function(t){t.addEventListener("input",(function(){e._checkInpuValidation(t),e._hasInvalidInput()?(S(e,R).classList.add(S(e,C)),S(e,R).disabled=!0):(S(e,R).classList.remove(S(e,C)),S(e,R).disabled=!1)}))}))}},{key:"_checkInpuValidation",value:function(e){E(this,M,S(this,L).querySelector("".concat(S(this,I)).concat(e.id))),e.validity.valid?(S(this,M).classList.remove(S(this,T)),S(this,M).textContent="",e.classList.remove(S(this,P))):(e.classList.add(S(this,P)),S(this,M).textContent=e.validationMessage,S(this,M).classList.add(S(this,T)))}},{key:"_hasInvalidInput",value:function(){return S(this,O).some((function(e){return!e.validity.valid}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===q(o)?o:String(o)),r)}var o}var x=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getName=document.querySelector(t),this.getJob=document.querySelector(n),this.avatar=document.querySelector(r)}var t,n;return t=e,n=[{key:"setUserInfo",value:function(e){this.getName.textContent=e.name,this.getJob.textContent=e.about,this.avatar.src=e.avatar,this.userID=e._id}},{key:"getUserInfo",value:function(){return{name:this.getName.textContent,job:this.getJob.textContent}}},{key:"getUserId",value:function(){return this.userID}}],n&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}function U(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function z(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,V(e,t,"get"))}function N(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,V(e,t,"set"),n),n}function V(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var J=new WeakMap,G=new WeakMap,H=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,J,{writable:!0,value:void 0}),U(this,G,{writable:!0,value:void 0}),N(this,G,r),N(this,J,document.querySelector(n))}var t,n;return t=e,(n=[{key:"addItem",value:function(e){z(this,J).prepend(e)}},{key:"renderItem",value:function(e){z(this,J).append(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){z(t,G).call(t,e)}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}function K(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Q=new WeakMap,X=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=Q),r.set(n,o),this.popupElement=document.querySelector(t),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,K(e,t,"set"),n)}(this,Q,this.popupElement.querySelector(".popup__exit")),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this.popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e,t=this;this.popupElement.addEventListener("mouseup",(function(e){e.target.classList.contains("popup")&&t.close()})),(this,e=Q,function(e,t){return t.get?t.get.call(e):t.value}(this,K(this,e,"get"))).addEventListener("click",(function(){t.close()}))}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Y(o)?o:String(o)),r)}var o}function ee(){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ee.apply(this,arguments)}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function ie(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ue(e,t,"get"))}function ae(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ue(e,t,"set"),n),n}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce=new WeakMap,le=new WeakMap,se=new WeakMap,fe=new WeakMap,pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(r);if(o){var n=re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,e)});function a(e){var t,n=e.renderer,r=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),oe(ne(t=i.call(this,r)),ce,{writable:!0,value:void 0}),oe(ne(t),le,{writable:!0,value:void 0}),oe(ne(t),se,{writable:!0,value:void 0}),oe(ne(t),fe,{writable:!0,value:void 0}),ae(ne(t),le,n),ae(ne(t),se,t.popupElement.querySelector(".popup__content")),ae(ne(t),ce,Array.from(t.popupElement.querySelectorAll(".popup__input"))),ae(ne(t),fe,t.popupElement.querySelector(".popup__saved")),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this.newCard={},ie(this,ce).forEach((function(t){e.newCard[t.name]=t.value})),this.newCard}},{key:"close",value:function(){ee(re(a.prototype),"close",this).call(this),ie(this,se).reset()}},{key:"setEventListeners",value:function(){var e=this;ee(re(a.prototype),"setEventListeners",this).call(this),ie(this,se).addEventListener("submit",(function(t){t.preventDefault(),ie(e,le).call(e,e._getInputValues(),t)}))}},{key:"renderLoading",value:function(e){ie(this,fe).textContent=!0===e?"Сохранение...":"Сохранить"}}])&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(X);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ye(o)?o:String(o)),r)}var o}function de(){return de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},de.apply(this,arguments)}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}function we(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function ge(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ke(e,t,"get"))}function _e(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ke(e,t,"set"),n),n}function ke(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Se=new WeakMap,Ee=new WeakMap,je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(r);if(o){var n=me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),we(be(t=i.call(this,e)),Se,{writable:!0,value:void 0}),we(be(t),Ee,{writable:!0,value:void 0}),_e(be(t),Se,t.popupElement.querySelector(".popup__image")),_e(be(t),Ee,t.popupElement.querySelector(".popup__caption")),t}return t=a,(n=[{key:"open",value:function(e){ge(this,Se).src=e.link,ge(this,Se).alt=e.name,ge(this,Ee).textContent="".concat(e.name),de(me(a.prototype),"open",this).call(this)}}])&&he(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(X);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Le(o)?o:String(o)),r)}var o}function Pe(){return Pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Te(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Pe.apply(this,arguments)}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var n=Te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._formElement=t.popupElement.querySelector(".popup__content"),t}return t=a,(n=[{key:"setSubmitAction",value:function(e){this._functionSubmit=e}},{key:"setEventListeners",value:function(){var e=this;Pe(Te(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._functionSubmit()}))}}])&&Oe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(X),Re=document.querySelector(".profile__edit-button"),Me=(document.querySelector(".popup_type_profile").querySelector(".popup__content"),document.querySelector(".profile__button")),We=document.querySelector("#name"),qe=document.querySelector("#job"),Ae=document.querySelector(".profile__avatar-button"),xe={inputSelector:".popup__input",errorStr:".popup__message-error_",submitButonSelector:".popup__saved",popupInputErrorClass:"popup__input-error",invalidSubmitButtonClass:"popup__saved-invalid",popupInputInvalidClass:"popup__input-invalid"};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==De(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===De(o)?o:String(o)),r)}var o}function Ue(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function ze(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ve(e,t,"get"))}function Ne(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ve(e,t,"set"),n),n}function Ve(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Je=new WeakMap,Ge=new WeakMap,He=function(){function e(t){var n=t.baseURL,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ue(this,Je,{writable:!0,value:void 0}),Ue(this,Ge,{writable:!0,value:void 0}),Ne(this,Je,n),Ne(this,Ge,r)}var t,n;return t=e,n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(ze(this,Je),"/cards"),{method:"GET",headers:ze(this,Ge)}).then(this._checkResponse)}},{key:"addMyCards",value:function(e,t){return fetch("".concat(ze(this,Je),"/cards"),{method:"POST",headers:ze(this,Ge),body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}},{key:"replaceInfo",value:function(e){return fetch("".concat(ze(this,Je),"/users/me"),{method:"PATCH",headers:ze(this,Ge),body:JSON.stringify({name:e.name,about:e.job})}).then(this._checkResponse)}},{key:"getInfo",value:function(){return fetch("".concat(ze(this,Je),"/users/me"),{method:"GET",headers:ze(this,Ge)}).then(this._checkResponse)}},{key:"setLikes",value:function(e){return fetch("".concat(ze(this,Je),"/cards/").concat(e,"/likes"),{method:"PUT",headers:ze(this,Ge)}).then(this._checkResponse)}},{key:"deleteLikes",value:function(e){return fetch("".concat(ze(this,Je),"/cards/").concat(e,"/likes"),{method:"DELETE",headers:ze(this,Ge)}).then(this._checkResponse)}},{key:"changeProfile",value:function(e){return fetch("".concat(ze(this,Je),"/users/me/avatar"),{method:"PATCH",headers:ze(this,Ge),body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(ze(this,Je),"/cards/").concat(e),{method:"DELETE",headers:ze(this,Ge)}).then(this._checkResponse)}}],n&&Be(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fe=new He({baseURL:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"6af0fad8-3b2e-4d49-af39-c98a3c186d35","Content-Type":"application/json"}});function Ke(){Fe.getInfo().then((function(e){tt.setUserInfo(e)})).catch((function(e){return console.error(e)}))}var Qe=new pe({renderer:function(e){Qe.renderLoading(!0),Fe.changeProfile(e).then((function(e){Qe.close(),tt.setUserInfo(e)})).catch((function(e){console.error(e)})).finally((function(){Qe.renderLoading(!1)}))},popupSelector:".popup_type_profile-change"});Ae.addEventListener("click",(function(){Qe.open(),Qe.renderLoading(!1),Ke()})),Qe.setEventListeners();var Xe=new je(".popup_type_image");Xe.setEventListeners();var Ye=function(e){var t=new w({cards:e,userId:"bc0363b9087060d2af931731",renderer:function(){Xe.open(e)},handleLikeButton:function(){t.isLaked?Fe.deleteLikes(e._id).then((function(e){t.unActiveLike(),t.displayLike(e.likes)})).catch((function(e){console.error(e)})):Fe.setLikes(e._id).then((function(e){t.activeLike(),t.displayLike(e.likes)})).catch((function(e){console.error(e)}))},handleDeleteCard:function(t){var n=t.target;rt.setSubmitAction((function(){Fe.deleteCard(e._id).then((function(){n.closest(".card").remove(),rt.close()})).catch((function(e){console.error("Ошибка - "+e)})).finally((function(){console.info("Карточка удалена")}))}))},templateSelector:".copy__card"});return t.generateCard()},Ze=new H({renderer:function(e){Ze.addItem(Ye(e))}},".elements"),et=new pe({renderer:function(e){et.renderLoading(!0),Fe.addMyCards(e.name,e.link).then(void Fe.getInitialCards().then((function(e){Ze.addItem(Ye(e[0]))})).catch((function(e){return console.error(e)}))).catch((function(e){console.error("Ошибка - "+e)})).finally((function(){et.renderLoading(!1),console.info("Карточка добавлена!!!!"),et.close()}))},popupSelector:".popup_type_add-cards"});et.setEventListeners(),Me.addEventListener("click",(function(){et.renderLoading(!1),et.open()}));var tt=new x(".profile__name",".profile__job",".profile__avatar"),nt=new pe({renderer:function(e){nt.renderLoading(!0),Fe.replaceInfo(e).then((function(e){nt.renderLoading(!0),tt.setUserInfo(e),Ke()})).catch((function(e){console.log(e)})).finally((function(){nt.close(),nt.renderLoading(!1)}))},popupSelector:".popup_type_profile"});nt.setEventListeners(),Re.addEventListener("click",(function(){We.value=tt.getUserInfo().name,nt.renderLoading(!1),qe.value=tt.getUserInfo().job,nt.open()})),new W(xe,".popup__content_type_add-cards").enableValidation(),new W(xe,".popup__content_type_profile").enableValidation(),Promise.all([Fe.getInitialCards(),Fe.getInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Ze.renderItems(o),tt.setUserInfo(i)})).catch((function(e){return console.error(e)}));var rt=new Ie(".popup_delete-card");rt.setEventListeners()})();